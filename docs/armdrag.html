<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Three.js Arm Test</title>
<style>
  body { margin: 0; overflow: hidden; }
  canvas { display: block; }
</style>
</head>
<body>

<script type="module">

// -------------------- IMPORTS --------------------
import * as THREE from "https://unpkg.com/three@0.162.0/build/three.module.js";
import { OrbitControls } from "https://unpkg.com/three@0.162.0/examples/jsm/controls/OrbitControls.js";

// -------------------- SCENE SETUP --------------------
const scene = new THREE.Scene();
scene.background = new THREE.Color(0x202020);

const camera = new THREE.PerspectiveCamera(
  60,
  window.innerWidth / window.innerHeight,
  0.1,
  100
);
camera.position.set(3, 2, 4);

const renderer = new THREE.WebGLRenderer({ antialias: true });
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

const controls = new OrbitControls(camera, renderer.domElement);
controls.enableDamping = true;

// Lights
scene.add(new THREE.AmbientLight(0xffffff, 0.4));
const dir = new THREE.DirectionalLight(0xffffff, 0.8);
dir.position.set(3, 5, 4);
scene.add(dir);

// Grid + axes
scene.add(new THREE.GridHelper(10, 10));
scene.add(new THREE.AxesHelper(2));

// -------------------- SIMPLE 3-DOF ARM --------------------
const material = new THREE.MeshStandardMaterial({ color: 0x33aaee });
const jointMaterial = new THREE.MeshStandardMaterial({ color: 0xffdd55 });

function makeSegment(length) {
  const geo = new THREE.BoxGeometry(0.2, length, 0.2);
  const mesh = new THREE.Mesh(geo, material);
  mesh.position.y = length / 2;
  return mesh;
}

function makeJoint() {
  const geo = new THREE.SphereGeometry(0.15, 16, 16);
  return new THREE.Mesh(geo, jointMaterial);
}

// Base (fixed)
const base = new THREE.Object3D();
scene.add(base);

// Joint 1
const joint1 = new THREE.Object3D();
base.add(joint1);
joint1.add(makeJoint());

const seg1 = makeSegment(1.0);
joint1.add(seg1);

// Joint 2
const joint2 = new THREE.Object3D();
joint2.position.y = 1.0;
seg1.add(joint2);
joint2.add(makeJoint());

const seg2 = makeSegment(0.8);
joint2.add(seg2);

// Joint 3
const joint3 = new THREE.Object3D();
joint3.position.y = 0.8;
seg2.add(joint3);
joint3.add(makeJoint());

const seg3 = makeSegment(0.6);
joint3.add(seg3);

// -------------------- ANIMATION LOOP --------------------
function animate() {
  requestAnimationFrame(animate);
  controls.update();
  renderer.render(scene, camera);
}
animate();

// -------------------- HANDLE RESIZE --------------------
window.addEventListener("resize", () => {
  camera.aspect = window.innerWidth / window.innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(window.innerWidth, window.innerHeight);
});

</script>
</body>
</html>
